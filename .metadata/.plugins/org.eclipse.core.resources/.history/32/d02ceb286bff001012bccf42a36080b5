// Where the LD is Connected
// Port C
// pin 13

// PERIPHIRAL BASE ADDR
#define PERIPH_BASE 			(0x40000000UL)

// APB2 CLOCK BASE ADDR
#define APB2PERIPH_OFFSET 		(0x00010000UL)
#define APB2PERIPH_BASE 		(PERIPH_BASE + APB2PERIPH_OFFSET)

// PORT C BASE ADDR
#define GPIOC_OFFSET			(0x00001000UL)
#define GPIOC_BASE				(APB2PERIPH_BASE + GPIOC_OFFSET)

// AHBP CLOCK BASE ADDR
#define AHBPERIPH_OFFSET		(0x00018000UL)
#define AHBPERIPH_BASE			(PERIPH_BASE + AHBPERIPH_OFFSET)

// RCC BASE ADDR
#define RCC_OFFSET				(0x0009000UL)
#define RCC_BASE				(AHBPERIPH_BASE + RCC_OFFSET)

// APB2 Enable Register Base ADDR
#define RCC_APB2EN_R_OFFSET 	(0x18UL)
#define RCC_APB2EN_R 			(*(volatile unsigned int *)(RCC_BASE + RCC_APB2EN_R_OFFSET))

// PORT C GPIO CRH Register BASE ADDR
#define GPIOx_CRH_R_OFFSET		(0x04UL)
#define GPIOx_CRH_R				(*(volatile unsigned int *)(GPIOC_BASE + GPIOx_CRH_R_OFFSET)) // GPIO Mode Register

// PORT C GPIO Output Direction Register Base ADDR
#define GPIOx_OD_R_OFFSET		(0x0C)
#define GPIOx_OD_R				(*(volatile unsigned int *)(GPIOC_BASE + GPIOx_OD_R_OFFSET))

#define IOPCEN					(1U<<4)
#define PIN13					(1<<13)

#define LED_PIN					PIN13

int main(void){
	// Enable clock  access to GPIOC
	RCC_APB2EN_R |= IOPCEN;
	// Set PC13 as output max speed 10MHz
	GPIOx_CRH_R |= (1<<20);
	GPIOx_CRH_R &= ~(1<<21);
	// Set PC13 as output open drain
	GPIOx_CRH_R |= (1<<22);
	GPIOx_CRH_R &= ~(1<<23);
	while(1){
		// Set PC13 High
		GPIOx_OD_R |= LED_PIN;
		for (int i = 0; i < 1500; i++) {
		    // Corps de la boucle (code à répéter)
		}
		GPIOx_OD_R &= ~LED_PIN;

		for (int i = 0; i < 1500; i++) {
				    // Corps de la boucle (code à répéter)
				}
	}
}










